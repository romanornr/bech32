<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Segwit address error locator demo</title>
</head>
<body>
<script src="demo.js" type="text/javascript"></script>
<script type="text/javascript">

var bech32_ecc = require("./bech32_ecc");

function update_status() {
    var address = document.getElementById("address").value;
    var res = bech32_ecc.check(address);
    if (res === null) {
        document.getElementById("result").innerHTML = "Ok";
    } else {
        document.getElementById("result").innerHTML = res.error;
        if (res.pos !== null) {
            var cp = "";
            for (var p = 0; p < address.length; ++p) {
                if (res.pos.indexOf(address.charAt(p)) != -1) {
                    cp += "<div style=\"color:red\">" + address.charAt(p) + "</div>";
                } else {
                    cp += address.charAt(p);
                }
            }
            document.getElementById("copy").innerHTML = cp;
        }
    }
}
</script>
<h3>Segwit address demo</h3>
<p><input type="text" id="address" maxlength="74" size="74" oninput="update_status();" /></p>

<p><a id="result"></a></p>
<p><a id="copy"></a></p>
</body>
</html>
