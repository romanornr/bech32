<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Segwit address error locator demo</title>
</head>
<body>
<script src="demo.js" type="text/javascript"></script>
<script type="text/javascript">

function update_status() {
    var address = document.getElementById("address").value;
    var res = segwit_addr_ecc.check(address);
    var cp = "";
    if (res.error === null) {
        if (res.hrp != "bc" && res.hrp != "tb") {
            res.error = "Unknown address type";
            res.pos = [0,1];
        }
    }
    if (res === null) {
        document.getElementById("result").innerHTML = "<a style=\"color:green\">Ok</a>";
    } else {
        document.getElementById("result").innerHTML = res.error;
        if (res.pos !== null) {
            for (var p = 0; p < address.length; ++p) {
                if (res.pos.indexOf(p) != -1) {
                    cp += "<a style=\"color:red\">" + address.charAt(p) + "</a>";
                } else {
                    cp += address.charAt(p);
                }
            }
        }
    }
    document.getElementById("copy").innerHTML = cp;
}
</script>
<h3>Segwit address demo</h3>
<p><input type="text" id="address" size="74" oninput="update_status();" /></p>

<p><a id="result"></a></p>
<p><a id="copy"></a></p>
</body>
</html>
